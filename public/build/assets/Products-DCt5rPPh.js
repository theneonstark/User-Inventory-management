import{r as s,j as e,$ as b,a as R}from"./app-BQcaIY-e.js";import{c as z}from"./index-qtWvkfnK.js";import{B as i,I as y}from"./input-C3cybE54.js";import{C as B,a as V,b as H,c as G}from"./card-CntAeJCd.js";import{S as U,a as J,b as K,c as W,d as k}from"./select-DeP6fCUW.js";import{D as j,a as N,b as v,c as w,d as C}from"./dialog-_kpngBO7.js";import{e as X}from"./Dashboard-CLt870Xn.js";import{p as S}from"./product-DAj8yyFd.js";import{y as n}from"./index-5-_raj7P.js";import{S as P,I as x}from"./index-Cv23YCoD.js";import{S as Y}from"./search-CKATGfp3.js";import{F as Z}from"./filter-D0wOiv3R.js";import{E as ee}from"./eye-DUSbmVCT.js";import"./index-DX14B-De.js";import"./orders-CfAbe6B9.js";import"./circle-check-big-CZpyahZG.js";function te(){const[l,_]=s.useState("All Categories"),[c,q]=s.useState(""),[A,D]=s.useState([]),[O,I]=s.useState([]),[a,E]=s.useState(null),[o,m]=s.useState(1),[M,g]=s.useState(!1),[F,L]=s.useState(!1),[h,Q]=s.useState([]),u="https://imsuser.infinimorphconsulting.com/cart";s.useEffect(()=>{(async()=>{try{const[r,d]=await Promise.all([S.getAllProducts(),S.getCategories()]);D(r.data.products||[]),I(d.data.categories||[])}catch(r){console.error("Error fetching data:",r),n.error("Failed to load products or categories")}})()},[]);const p=()=>{let t=[...A];return l!=="All Categories"&&(t=t.filter(r=>r.category===l)),c&&(t=t.filter(r=>r.productName.toLowerCase().includes(c.toLowerCase()))),t.slice(0,6)},T=t=>{E(t),m(1),g(!0)},$=async()=>{var t,r;if(!a||o<=0||o>a.stock_quantity){n.error(o<=0?"Quantity must be at least 1":"Quantity exceeds available stock");return}try{const d=await R.post(u,{product_id:a.id,quantity:o});(d==null?void 0:d.status)===201&&(Q([...h,{...a,quantity:o}]),n.success(`${a.productName} added to cart`,{autoClose:2e3}),g(!1))}catch(d){console.error("Error adding to cart:",d),n.error(((r=(t=d.response)==null?void 0:t.data)==null?void 0:r.error)||"Failed to add product to cart")}},f="https://i.pinimg.com/736x/df/9f/a9/df9fa9eb2ac17ed7794706eb5c7f877c.jpg";return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 bg-gradient-to-br from-indigo-200 via-gray-100 to-purple-200 dark:from-gray-950 dark:via-gray-900 dark:to-indigo-950 min-h-screen",children:[e.jsx("div",{className:"mb-8 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:e.jsx(b,{href:`${u}`,children:e.jsxs(i,{variant:"outline",className:"flex items-center gap-2 text-indigo-700 dark:text-indigo-300 border-indigo-700 dark:border-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-all duration-300 shadow-lg hover:shadow-xl rounded-full px-6 py-2",children:[e.jsx(P,{className:"h-5 w-5 animate-bounce"})," Cart (",h.length,")"]})})}),e.jsx("div",{className:"mb-12",children:e.jsx(X,{})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-xl border border-indigo-300 dark:border-gray-700 transform hover:shadow-2xl transition-all duration-500",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(y,{placeholder:"Search products...",className:"pl-12 w-full rounded-full shadow-md focus:ring-2 focus:ring-indigo-600 dark:border-gray-600 bg-indigo-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 transition-all duration-300 border-indigo-300 hover:bg-indigo-200 dark:hover:bg-gray-700",value:c,onChange:t=>q(t.target.value)}),e.jsx(Y,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-indigo-600 dark:text-indigo-300"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-300"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Category:"}),e.jsxs(U,{value:l,onValueChange:_,children:[e.jsx(J,{className:"w-[200px] rounded-full shadow-md bg-indigo-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-indigo-300 dark:border-gray-600 focus:ring-2 focus:ring-indigo-600 hover:bg-indigo-200 dark:hover:bg-gray-700",children:e.jsx(K,{placeholder:"All Categories"})}),e.jsxs(W,{className:"bg-white dark:bg-gray-900 shadow-xl rounded-lg border-indigo-300 dark:border-gray-700",children:[e.jsx(k,{value:"All Categories",className:"text-gray-700 dark:text-gray-200 hover:bg-indigo-100 dark:hover:bg-gray-700",children:"All Categories"}),O.map(t=>e.jsx(k,{value:t.name,className:"text-gray-700 dark:text-gray-200 hover:bg-indigo-100 dark:hover:bg-gray-700",children:t.name},t.id))]})]})]})})]}),e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:p().length===0?e.jsx("div",{className:"col-span-full text-center text-gray-500 dark:text-gray-400 text-lg py-8 animate-pulse",children:"No products found. Try adjusting your filters!"}):p().map(t=>e.jsxs(B,{className:"shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-105 hover:-translate-y-2 rounded-2xl overflow-hidden bg-gradient-to-br from-white to-indigo-50 dark:from-gray-800 dark:to-indigo-900 border border-indigo-300 dark:border-gray-700",children:[e.jsx(V,{className:"p-0 border-b border-indigo-200 dark:border-gray-600",children:e.jsx("img",{src:t.image||f,alt:t.productName,className:"w-full h-52 object-cover rounded-t-2xl transition-transform duration-500 hover:scale-110"})}),e.jsxs(H,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-gray-100 tracking-tight drop-shadow-sm",children:t.productName}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:t.category})]}),e.jsx("span",{className:z("rounded-full px-3 py-1 text-xs font-semibold shadow-md",t.status==="Available"&&"bg-green-200 text-green-800 dark:bg-green-900 dark:text-green-300",t.status==="Low Stock"&&"bg-orange-200 text-orange-800 dark:bg-orange-900 dark:text-orange-300",t.status==="Out"&&"bg-red-200 text-red-800 dark:bg-red-900 dark:text-red-300"),children:t.status})]}),e.jsxs("p",{className:"mt-3 text-xl font-extrabold flex items-center text-indigo-700 dark:text-indigo-300 drop-shadow-sm",children:[e.jsx(x,{size:20,className:"mr-1"}),t.price]})]}),e.jsxs(G,{className:"p-4 pt-0 flex justify-between bg-gradient-to-r from-indigo-100 to-white dark:from-indigo-950 dark:to-gray-800",children:[e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:["Stock: ",t.stock_quantity]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>T(t),className:"text-indigo-700 dark:text-indigo-300 hover:bg-indigo-200 dark:hover:bg-indigo-800 rounded-full shadow-md transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:[e.jsx(ee,{className:"h-5 w-5 mr-2"})," View"]})})]})]},t.id))})]}),a&&e.jsx(j,{open:M,onOpenChange:g,children:e.jsxs(N,{className:"max-w-lg bg-gradient-to-br from-white to-indigo-50 dark:from-gray-800 dark:to-indigo-900 rounded-2xl shadow-2xl p-6 border border-indigo-300 dark:border-gray-700 animate-fade-in",children:[e.jsxs(v,{children:[e.jsx(w,{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-700 to-purple-700 dark:from-indigo-300 dark:to-purple-300 tracking-tight drop-shadow-md",children:a.productName}),e.jsx(C,{className:"text-gray-600 dark:text-gray-400 italic",children:"Explore product details below"})]}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsx("img",{src:a.image||f,alt:a.productName,className:"w-full h-60 object-cover rounded-xl shadow-lg transition-transform duration-500 hover:scale-105"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:[e.jsx("strong",{className:"text-indigo-700 dark:text-indigo-300 font-semibold",children:"Name:"})," ",a.productName]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:[e.jsx("strong",{className:"text-indigo-700 dark:text-indigo-300 font-semibold",children:"Category:"})," ",a.category]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:[e.jsx("strong",{className:"text-indigo-700 dark:text-indigo-300 font-semibold",children:"Stock:"})," ",a.stock_quantity]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-200 flex items-center",children:[e.jsx("strong",{className:"text-indigo-700 dark:text-indigo-300 font-semibold",children:"Price:"}),e.jsx(x,{size:20,className:"ml-2 mr-1 text-indigo-700 dark:text-indigo-300"}),e.jsx("span",{className:"text-2xl font-extrabold text-indigo-700 dark:text-indigo-300",children:a.price})]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:[e.jsx("strong",{className:"text-indigo-700 dark:text-indigo-300 font-semibold",children:"Description:"})," ",a.description||"N/A"]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:[e.jsx("strong",{className:"text-indigo-700 dark:text-indigo-300 font-semibold",children:"Added On:"})," ",new Date(a.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(y,{type:"number",value:o,onChange:t=>m(Math.max(1,Math.min(a.stock_quantity,parseInt(t.target.value)||1))),min:"1",max:a.stock_quantity,className:"w-28 rounded-full shadow-md border-indigo-400 dark:border-gray-600 focus:ring-2 focus:ring-indigo-600 transition-all duration-300 bg-indigo-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-indigo-200 dark:hover:bg-gray-600",disabled:a.stock_quantity===0}),e.jsxs(i,{onClick:$,className:"bg-gradient-to-r from-indigo-700 to-purple-700 hover:from-indigo-800 hover:to-purple-800 text-white rounded-full shadow-lg transition-all duration-500 transform hover:scale-105 hover:shadow-xl px-6 py-2",disabled:a.stock_quantity===0,children:[e.jsx(P,{className:"h-5 w-5 mr-2 animate-pulse"})," Add to Cart"]})]}),a.stock_quantity===0&&e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm animate-pulse bg-red-100 dark:bg-red-900 p-2 rounded-lg shadow-md",children:"This product is out of stock."}),o>a.stock_quantity&&a.stock_quantity>0&&e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm animate-pulse bg-red-100 dark:bg-red-900 p-2 rounded-lg shadow-md",children:"Quantity exceeds available stock."})]})]})}),a&&e.jsx(j,{open:F,onOpenChange:L,children:e.jsxs(N,{className:"max-w-lg bg-gradient-to-br from-white to-indigo-50 dark:from-gray-800 dark:to-indigo-900 rounded-2xl shadow-2xl p-6 border border-indigo-300 dark:border-gray-700 animate-fade-in",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-700 to-purple-700 dark:from-indigo-300 dark:to-purple-300 tracking-tight drop-shadow-md",children:["Order ",a.productName]}),e.jsx(C,{className:"text-gray-600 dark:text-gray-400 italic",children:"Place an order for this product"})]}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:[e.jsx("strong",{className:"text-indigo-700 dark:text-indigo-300 font-semibold",children:"Product:"})," ",a.productName]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-200 flex items-center",children:[e.jsx("strong",{className:"text-indigo-700 dark:text-indigo-300 font-semibold",children:"Price:"}),e.jsx(x,{size:20,className:"ml-2 mr-1 text-indigo-700 dark:text-indigo-300"}),e.jsx("span",{className:"text-2xl font-extrabold text-indigo-700 dark:text-indigo-300",children:a.price})]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:[e.jsx("strong",{className:"text-indigo-700 dark:text-indigo-300 font-semibold",children:"Stock Available:"})," ",a.stock_quantity]}),e.jsx("div",{className:"flex gap-4 mt-4",children:e.jsx(b,{href:`/addorder/${a.id}`,children:e.jsx(i,{className:"bg-gradient-to-r from-indigo-700 to-purple-700 hover:from-indigo-800 hover:to-purple-800 text-white rounded-full shadow-lg transition-all duration-500 transform hover:scale-105 hover:shadow-xl px-6 py-2",disabled:a.stock_quantity===0,children:"Place Order"})})}),a.stock_quantity===0&&e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm animate-pulse bg-red-100 dark:bg-red-900 p-2 rounded-lg shadow-md",children:"This product is out of stock and cannot be ordered."})]})]})})]})}function be(){return e.jsx(Layout,{children:e.jsx(te,{})})}export{be as default};
